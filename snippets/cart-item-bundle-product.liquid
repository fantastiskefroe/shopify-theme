<div class="cart__item cart__item-bundle-product" data-key="{{ product.key }}">
  {%- assign img_url = product | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
  <div class="cart__image">
    <a href="{{ product.url }}" class="image-wrap">
      <img class="lazyload"
          src="{{ product | img_url: '100x' }}"
          data-src="{{ img_url }}"
          data-widths="[180, 360, 540]"
          data-aspectratio="{{ product.aspect_ratio }}"
          data-sizes="auto"
          alt="{{ product.product.title | escape }}">
      <noscript>
        <img class="lazyloaded" src="{{ product | img_url: '100x' }}" alt="{{ product.product.title | escape }}">
      </noscript>
    </a>
  </div>

  <div class="cart__item-details">
    <div class="cart__item--name">
      <div class="cart__item--title">
        <a href="{{ product.url }}" class="cart__item-name">
          {{ product.product.title }}
        </a>
      </div>

      <div class="cart__item--variants">
        {%- unless product.product.has_only_default_variant -%}
          <div>
            {%- for option in product.options_with_values -%}
              {{ option.value }}{% unless forloop.last %} & {% endunless %}
            {%- endfor -%}
          </div>
        {%- endunless -%}
      </div>
    </div>

    <div>
      {{ product.quantity }} stk.
    </div>
  </div>

  <div class="cart__item--price">
    {%- assign discountedPrice = discountCoef | times: product.original_price -%}
    {% if product.original_price != discountedPrice %}
      <span class="visually-hidden">{{ 'products.general.regular_price' | t }}</span>
      <small class="cart__price cart__price--strikethrough">
        {%- render 'price' with product.original_price -%}
      </small>
      <span class="visually-hidden">{{ 'products.general.sale_price' | t }}</span>
      <span class="cart__price cart__discount">
        {%- render 'price' with discountedPrice -%}
      </span>
    {% else %}
      <span class="cart__price">
        {%- render 'price' with product.original_price -%}
      </span>
    {% endif %}

    {%- if product.unit_price_measurement != blank -%}
      {%- capture unit_price_base_unit -%}
        <span class="product__unit-base--{{ section_id }}">
              {%- if product.unit_price_measurement -%}
                {%- if product.unit_price_measurement.reference_value != 1 -%}
                  {{ product.unit_price_measurement.reference_value }}
                {%- endif -%}
                {{ product.unit_price_measurement.reference_unit }}
              {%- endif -%}
            </span>
      {%- endcapture -%}
      <span class="product__unit-price">{{ product.unit_price | money }}/{{ unit_price_base_unit }}</span>
    {%- endif -%}

    {%- if product.line_level_discount_allocations != blank -%}
      {%- for discount_allocation in product.line_level_discount_allocations -%}
        <small class="cart__discount">{{ discount_allocation.discount_application.title }}
          (-{{ discount_allocation.amount | money }})</small>
      {%- endfor -%}
    {%- endif -%}
  </div>

</div>

